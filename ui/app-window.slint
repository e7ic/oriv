 import { Button, VerticalBox, HorizontalBox } from "std-widgets.slint";
import { TitleBar } from "components/title-bar.slint";

export component AppWindow inherits Window {
    icon: @image-url("../assets/app-icon.png");
    title: "Oriv";
    preferred-width: 1200px;
    preferred-height: 800px;
    min-width: 800px;
    min-height: 600px;
    no-frame: true;
    background: transparent;

    in-out property <int> counter: 42;
    callback request-increase-value();

    // 窗口控制回调
    callback minimize-window();
    callback maximize-window() -> bool;  // 返回是否最大化
    callback close-window();
    callback start-drag-window();  // 开始拖动窗口

    // 窗口状态
    in-out property <bool> is-maximized: false;

    Rectangle {
        width: 100%;
        height: 100%;
        background: white;
        border-radius: root.is-maximized ? 0px : 16px;
        clip: true;

        VerticalBox {
            padding: 0px;
            spacing: 0px;
            width: 100%;

            // 自定义标题栏
            TitleBar {
                title: root.title;
                is-maximized <=> root.is-maximized;

                minimize-clicked => {
                    root.minimize-window();
                }

                maximize-clicked => {
                    root.is-maximized = root.maximize-window();
                }

                close-clicked => {
                    root.close-window();
                }

                start-drag => {
                    root.start-drag-window();
                }
            }

            // 主内容区域
            Rectangle {
            }
        }
    }
}
